<div>
    <table class="kuiTable tableIndexGroups">
        <thead>
        <tr>
            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">
                Action Groups
            </th>

            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">
                <input type="checkbox" data-ng-model="showAdvanced"> Show Advanced</td>
            </th>

        </tr>
        </thead>
        <tbody>
        <tr class="kuiTableRow" ng-show="!permissionsResource.actiongroups.length">
            <td class="kuiTableRowCell cellAlignTop kuiNoItems sgNoItems" colspan="2">
                    No Action Groups found.
            </td>
        </tr>
        <tr data-test-subj="userRow" class="kuiTableRow" data-ng-repeat="actiongroup in permissionsResource.actiongroups track by $index" >
            <td class="kuiTableRowCell cellAlignTop">
                <fieldset class="marginbottom--small" id="object-form-actiongroups">
                    <angucomplete id="indexactiongroup-{{indexname}}-{{doctypename}}"
                                  placeholder="Add Action Group"
                                  pause="10"
                                  selectedobject="permissionsResource.actiongroups[$index]"
                                  localdata="actiongroupsAutoComplete"
                                  minlength="1"
                                  datafield="name"
                                  titlefield="name"
                                  searchfields="name"
                                  inputclass="kuiTextInput fullwidth"/>
                </fieldset>
            </td>
            <td class="kuiTableRowCell cellAlignTop actions">
                <button style="display:inline-block" type="button" ng-click="removeArrayEntry(permissionsResource.actiongroups, actiongroup)" class="kuiButton kuiButton--danger kuiButton--iconText">
                    <span class="kuiButton__icon kuiIcon fa-trash-o"></span>
                </button>
            </td>
        </tr>
        <tr class="kuiTableRow">
            <td class="kuiTableRowCell cellAlignTop ">

            </td>
            <td class="kuiTableRowCell cellAlignTop actions">
                <button type="button" ng-click="addArrayEntry(permissionsResource, 'actiongroups', '')" ng-disabled="lastArrayEntryEmpty(permissionsResource.actiongroups)" class="kuiButton kuiButton--primary kuiButton--iconText">
                    <span class="kuiButton__icon kuiIcon fa-plus"></span>
                    Add Action Group
                </button>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Permissions Table -->
    <table class="kuiTable tableIndexGroups" ng-if="showAdvanced">
        <thead>
        <tr>
            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">
                Single Permissions
            </th>

            <th class="kuiTableHeaderCell">
            </th>
        </tr>
        </thead>
        <tbody>
        <tr class="kuiTableRow" ng-show="!permissionsResource.permissions.length">
            <td class="kuiTableRowCell cellAlignTop kuiNoItems sgNoItems" colspan="2">
                No Single Permissions found.
            </td>
        </tr>
        <tr data-test-subj="userRow" class="kuiTableRow" data-ng-repeat="permission in permissionsResource.permissions track by $index">
            <td class="kuiTableRowCell cellAlignTop">
                <fieldset class="marginbottom--small" id="object-form-actiongroups">

                    <angucomplete id="indexpermissions-{{indexname}}-{{doctypename}}"
                                  placeholder="Start with cluster: or indices:"
                                  pause="10"
                                  selectedobject="permissionsResource.permissions[$index]"
                                  localdata="allpermissionsAutoComplete"
                                  minlength="1"
                                  datafield="name"
                                  titlefield="name"
                                  searchfields="name"
                                  inputclass="kuiTextInput fullwidth"
                                  pattern="^(cluster:.*|indices:.*)"
                            />


                </fieldset>
            </td>
            <td class="kuiTableRowCell cellAlignTop actions">
                <a ng-click="removeArrayEntry(permissionsResource.permissions, permission)" class="kuiButton kuiButton--danger kuiButton--iconText">
                    <span class="kuiButton__icon kuiIcon fa-trash-o"></span>
                </a>
            </td>
        </tr>
        <tr class="kuiTableRow">
            <td class="kuiTableRowCell cellAlignTop actions"></td>
            <td class="kuiTableRowCell cellAlignTop actions">
                <button type="button" ng-click="addArrayEntry(permissionsResource, 'permissions', '')" ng-disabled="lastArrayEntryEmpty(permissionsResource.permissions)" class="kuiButton kuiButton--primary kuiButton--iconText">
                    <span class="kuiButton__icon kuiIcon fa-plus"></span>
                    Add Single Permission
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
